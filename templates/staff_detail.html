{% extends 'base.html' %}
{% block title %}{{ staff.name }}{% endblock %}

{% block content %}
<div class="staff-details">
    <h2>{{ staff.name }}</h2>
    <p>Phone: {{ staff.phone }}</p>
    <p>Bank account: {{ staff.bank_account }}</p>

    {% if staff.image %}
        <img src="{{ staff.image.url }}" alt="{{ staff.name }}" class="staff-image">
    {% endif %}
</div>


<style>
    .staff-details {
        position: relative;
        padding: 10px;
    }

    .staff-image {
        width: 180px;
        position: absolute;
        top: 0;
        right: 0;
    }
</style>
<br>
<br>
<br><hr>

    <h3>Ish vaqtlari</h3>

    <form method="get" style="margin-bottom: 20px;">
        <label for="start_date">Boshlanish sana:</label>
        <input type="date" name="start_date" id="start_date" value="{{ request.GET.start_date }}">

        <label for="end_date">Tugash sana:</label>
        <input type="date" name="end_date" id="end_date" value="{{ request.GET.end_date }}">

        <button type="submit">Filter</button>
    </form>
    {% if total_hours %}
        <p><strong>Jami ish soati:</strong> {{ total_hours }} soat</p>
    {% endif %}
    <a href="/add_worktime/" class="btn-link-button">Add</a>

    <style>
        .btn-link-button {
            display: inline-block;
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
        }

        .btn-link-button:hover {
            background-color: #0056b3;
        }
    </style>
  <table>
    <thead>
    <tr>
        <th>Oy</th>
        <th>Sana</th>
        <th>Boshlanish</th>
        <th>Tugash</th>
        <th>Soat</th>
        <th>Amal</th>  <!-- Yangi ustun -->
    </tr>
    </thead>
    <tbody>
    {% for wt in worktimes %}
        <tr>
            <td>{{ wt.date|date:"n" }}</td>
            <td>{{ wt.date|date:"j" }}</td>
            <td>{{ wt.start_time }}</td>
            <td>{{ wt.end_time }}</td>
            <td>{{ wt.total_hours }}</td>
            <td>
                <form method="post" action="{% url 'delete_worktime' wt.pk %}" onsubmit="return confirm('Ish vaqtini oâ€˜chirishni istaysizmi?');">
                    {% csrf_token %}
                    <button type="submit" style="color: red;">Delete</button>
                </form>
            </td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="7">Ma'lumot topilmadi</td>
        </tr>
    {% endfor %}
    </tbody>
</table>



    <style>
        .staff-details {
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f0f0f0;
        }
    </style>
{% endblock %}
